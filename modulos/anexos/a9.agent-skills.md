# Anexo: Agent Skills en VS Code - Guía Práctica

## 1. Introducción a Agent Skills

### ¿Qué son los Agent Skills?

Los **Agent Skills** son carpetas que contienen instrucciones, scripts y recursos que GitHub Copilot puede cargar cuando son relevantes para realizar tareas especializadas. Agent Skills es un **estándar abierto** ([agentskills.io](https://agentskills.io)) que funciona con múltiples agentes de IA, incluyendo:

- **GitHub Copilot en VS Code**: Disponible en chat y modo agente
- **GitHub Copilot CLI**: Accesible al trabajar en la terminal
- **GitHub Copilot coding agent**: Utilizado durante tareas de codificación automatizadas

### Beneficios clave de Agent Skills

| Beneficio | Descripción |
|-----------|-------------|
| **Especializar Copilot** | Personalizar capacidades para tareas específicas de dominio sin repetir contexto |
| **Reducir repetición** | Crear una vez, usar automáticamente en todas las conversaciones |
| **Componer capacidades** | Combinar múltiples skills para construir flujos de trabajo complejos |
| **Carga eficiente** | Solo el contenido relevante se carga en el contexto cuando es necesario |

### Estado actual

> **Nota**: El soporte de Agent Skills en VS Code está actualmente en versión preliminar. Debes habilitar la configuración `chat.useAgentSkills` para usar Agent Skills.

---

## 2. Agent Skills vs Custom Instructions

Aunque tanto Agent Skills como custom instructions ayudan a personalizar el comportamiento de Copilot, sirven para propósitos diferentes:

| Característica | Agent Skills | Custom Instructions |
|----------------|--------------|---------------------|
| **Propósito** | Enseñar capacidades y flujos de trabajo especializados | Definir estándares de código y directrices |
| **Portabilidad** | Funciona en VS Code, Copilot CLI y Copilot coding agent | Solo VS Code y GitHub.com |
| **Contenido** | Instrucciones, scripts, ejemplos y recursos | Solo instrucciones |
| **Alcance** | Específico por tarea, cargado bajo demanda | Siempre aplicado (o mediante patrones glob) |
| **Estándar** | Estándar abierto (agentskills.io) | Específico de VS Code |

### ¿Cuándo usar cada uno?

**Usar Agent Skills cuando quieras:**

- Crear capacidades reutilizables que funcionen con diferentes herramientas de IA
- Incluir scripts, ejemplos u otros recursos junto con instrucciones
- Compartir capacidades con la comunidad de IA más amplia
- Definir flujos de trabajo especializados como testing, debugging o procesos de deployment

**Usar custom instructions cuando quieras:**

- Definir estándares de código específicos del proyecto
- Establecer convenciones de lenguaje o framework
- Especificar guidelines de revisión de código o mensajes de commit
- Aplicar reglas basadas en tipos de archivo usando patrones glob

---

## 3. Crear un Skill

### Estructura de directorios

Los skills se almacenan en directorios con un archivo `SKILL.md` que define el comportamiento del skill. VS Code soporta dos tipos de skills:

| Tipo | Ubicación | Descripción |
|------|-----------|-------------|
| **Project skills** | `.github/skills/` (recomendado) | Skills específicos del proyecto |
| **Project skills (legacy)** | `.claude/skills/` | Para compatibilidad hacia atrás |
| **Personal skills** | `~/.copilot/skills/` (recomendado) | Skills personales del usuario |
| **Personal skills (legacy)** | `~/.claude/skills/` | Para compatibilidad hacia atrás |

### Estructura de archivos del skill

```
.github/skills/
├── api-controller/
│   ├── SKILL.md           # (o instructions.md para el vs code)
│   ├── examples/
│   │   └── AuthController.cs
│   └── templates/
│       └── controller-template.cs
├── domain-modeling/
│   ├── SKILL.md
│   └── examples/
│       └── entities/
├── data-access/
│   ├── SKILL.md
│   └── scripts/
└── unit-testing/
    ├── SKILL.md
    └── templates/
```

### Formato SKILL.md

El archivo `SKILL.md` es un archivo Markdown con YAML frontmatter que define los metadatos y comportamiento del skill.

#### Header (requerido)

El header está formateado como YAML frontmatter con los siguientes campos:

| Campo | Requerido | Descripción |
|-------|-----------|-------------|
| `name` | Sí | Identificador único del skill. Debe ser minúsculas, usando guiones para espacios (ejemplo: `webapp-testing`). Máximo 64 caracteres. |
| `description` | Sí | Descripción de lo que hace el skill **y cuándo usarlo**. Sé específico tanto en capacidades como en casos de uso para ayudar a Copilot a decidir cuándo cargar el skill. Máximo 1024 caracteres. |

#### Body (cuerpo)

El cuerpo del skill contiene las instrucciones, guidelines y ejemplos que Copilot debe seguir al usar el skill. Escribe instrucciones claras y específicas que describan:

- Qué ayuda a accomplir el skill
- Cuándo usar el skill
- Procedimientos paso a paso a seguir
- Ejemplos de input y output esperados
- Referencias a cualquier script o recurso incluido

#### Ejemplo de SKILL.md

````yaml
---
name: api-controller
description: Genera controladores REST API siguiendo convenciones PortalEmpleo. Úsalo cuando necesites implementar endpoints para un proyecto ASP.NET Core.
---

# API Controller Skill - PortalEmpleo

## When to use this skill

Use this skill when implementing REST API controllers for PortalEmpleo project.

## Project Context

- **Stack:** .NET 8, ASP.NET Core Web API
- **Architecture:** Clean Architecture (Domain, Application, Infrastructure, Api)
- **Authentication:** JWT HS256 (60min access, 7days refresh)
- **Validation:** FluentValidation

## Controller Standards

### Estructura del Controlador

```csharp
namespace PortalEmpleo.Api.Controllers;

[ApiController]
[Route("api/v1/[controller]")]
[Produces("application/json")]
public class AuthController : ControllerBase
{
    private readonly IAuthService _authService;
    private readonly ILogger<AuthController> _logger;

    public AuthController(IAuthService authService, ILogger<AuthController> logger)
    {
        _authService = authService;
        _logger = logger;
    }

    [HttpPost("register")]
    [ProducesResponseType(typeof(AuthResultDto), StatusCodes.Status201Created)]
    [ProducesResponseType(typeof(ProblemDetails), StatusCodes.Status400BadRequest)]
    public async Task<IActionResult> Register([FromBody] RegisterDto registerDto)
    {
        try
        {
            var result = await _authService.RegisterAsync(registerDto);
            return StatusCode(StatusCodes.Status201Created, result);
        }
        catch (ValidationException ex)
        {
            return BadRequest(new ProblemDetails
            {
                Title = "Validation Error",
                Detail = ex.Message
            });
        }
    }
}
```

## Required Elements

### 1. Atributos de Clase
- `[ApiController]`
- `[Route("api/v1/[controller]")]`
- `[Produces("application/json")]`

### 2. Documentación XML
- `<summary>` para la clase
- `<summary>` para cada método público
- `<param>` para parámetros
- `<returns>` para valor de retorno
- `[ProducesResponseType]` para todos los status codes posibles

### 3. Dependency Injection
- Inyectar interfaces de servicios
- Logger con ILogger<T>

### 4. Manejo de Errores
- Try-catch con logging
- Devolver ProblemDetails para errores

## Output Format

Generate complete .cs file with:
- All using statements
- Full class implementation
- XML documentation
- Error handling
- Route attributes

## Files to Write

- `src/PortalEmpleo.Api/Controllers/[Feature]Controller.cs`
````

## 4. Invocar un Skill

### Cómo activar un Agent Skill

Hay varias formas de invocar un skill en tus prompts:

#### 4.1 Activación automática

El agente de IA lee automáticamente el `name` y `description` de cada SKILL.md al inicio de la conversación. Cuando tus palabras clave coinciden con las descripciones definidas, el skill se carga automáticamente.

**Ejemplo:** Si describes "crear entidades de dominio", el skill `domain-modeling` se activa porque su descripción incluye "domain entities".

#### 4.2 Invocación explícita por nombre

Puedes invocar un skill directamente usando el prefijo `@`:

```
/@domain-modeling
/@unit-testing
/@api-controller
/@data-access
```

#### 4.3 Referencia directa en el prompt

```
Usa el skill @domain-modeling para crear las entidades del módulo Auth.

Implementa el servicio de autenticación. Usa el skill @api-controller para los endpoints y @unit-testing para los tests.
```

#### 4.4 Con Spec Kit (Slash Commands)

Cuando trabajas con SDD, puedes combinar Agent Skills con los comandos de Spec Kit:

```
/@unit-testing  # Activa el skill de testing
/specify        # Generar especificación
/@domain-modeling  # Crear entidades
```

### Estructura que busca el agente

```
.github/skills/
└── skill-name/
    └── SKILL.md    # El campo 'name' debe coincidir con el directorio padre
```

### Ejemplos de invocación en el contexto SDD

**Escenario 1: Implementar módulo Auth**
```
Implementa el módulo de autenticación siguiendo spec.md.
Usa @domain-modeling para las entidades User y UserRole.
Usa @data-access para el repositorio.
Usa @api-controller para los endpoints.
Usa @unit-testing para los tests.
```

**Escenario 2: Crear módulo de Ofertas**
```
Siguiendo plan.md, implementa el módulo de ofertas de empleo.
/@domain-modeling  Offer, Application # Job, enums
/@data-access       # Repositories
/@api-controller    # Controladores REST
```

**Escenario 3: Verificación de coherencia**
```
Verifica que la implementación es coherente con spec.md.
Revisa que los endpoints coinciden con la API spec.
Usa @api-controller para validar la estructura.
```

### Progresive disclosure

Agent Skills usa carga eficiente de contexto:

1. **Metadata** (~100 tokens): El `name` y `description` se cargan al inicio para todos los skills
2. **Instructions** (< 5000 tokens): El cuerpo completo del SKILL.md se carga cuando el skill se activa
3. **Resources** (cuando se necesitan): Scripts, templates y ejemplos se cargan solo si se requieren

---

## 5. Ejemplos Prácticos de Skills

### Ejemplo 1: Web Application Testing Skill

````
---
name: webapp-testing
description: Guía para testing de aplicaciones web usando Playwright. Úsalo cuando se te pida crear o ejecutar tests basados en navegador.
---

# Web Application Testing with Playwright

This skill helps you create and run browser-based tests for web applications using Playwright.

## When to use this skill

Use this skill when you need to:
- Create new Playwright tests for web applications
- Debug failing browser tests
- Set up test infrastructure for a new project

## Creating tests

1. Review the [test template](./test-template.js) for the standard test structure
2. Identify the user flow to test
3. Create a new test file in the `tests/` directory
4. Use Playwright's locators to find elements (prefer role-based selectors)
5. Add assertions to verify expected behavior

## Running tests

To run tests locally:
```bash
npx playwright test
```

To debug tests:
```bash
npx playwright test --debug
```

## Best practices

- Use data-testid attributes for dynamic content
- Keep tests independent and atomic
- Use Page Object Model for complex pages
- Take screenshots on failure
````

### Ejemplo 2: GitHub Actions Debugging Skill

````
---
name: github-actions-debugging
description: Guía para debugging de workflows de GitHub Actions que fallan. Úsalo cuando se te pida debugging de workflows de GitHub Actions fallidos.
---

# GitHub Actions Debugging

This skill helps you debug failing GitHub Actions workflows in pull requests.

## Process

1. Use the `list_workflow_runs` tool to look up recent workflow runs for the pull request and their status
2. Use the `summarize_job_log_failures` tool to get an AI summary of the logs for failed jobs
3. If you need more information, use the `get_job_logs` or `get_workflow_run_logs` tool to get the full failure logs
4. Try to reproduce the failure locally in your environment
5. Fix the failing build and verify the fix before committing changes

## Common issues

- **Missing environment variables**: Check that all required secrets are configured
- **Version mismatches**: Verify action versions and dependencies are compatible
- **Permission issues**: Ensure the workflow has the necessary permissions
- **Timeout issues**: Consider splitting long-running jobs or increasing timeout values
````

## 6. Skills Compartidos

### Repositorios de skills compartidos

Puedes usar skills creados por otros para mejorar las capacidades de Copilot:

| Repositorio | Descripción |
|-------------|-------------|
| [github/awesome-copilot](https://github.com/github/awesome-copilot) | Colección comunitaria creciente de skills, custom agents, instrucciones y prompts |
| [anthropics/skills](https://github.com/anthropics/skills) | Skills de referencia adicionales |

### Cómo usar un skill compartido

1. **Explorar** los skills disponibles en el repositorio
2. **Copiar** el directorio del skill a tu carpeta `.github/skills/`
3. **Revisar y personalizar** el archivo `SKILL.md` para tus necesidades
4. **Opcionalmente**, modificar o agregar recursos según sea necesario

> **Importante**: Siempre revisa los skills compartidos antes de usarlos para asegurar que cumplen con tus requisitos y estándares de seguridad.

---

## 7. Estándar Agent Skills

Agent Skills es un **estándar abierto** que permite portabilidad entre diferentes agentes de IA. Los skills que creas en VS Code funcionan con múltiples agentes:

| Agente | Disponibilidad |
|--------|----------------|
| **GitHub Copilot en VS Code** | Disponible en chat y modo agente |
| **GitHub Copilot CLI** | Accesible al trabajar en la terminal |
| **GitHub Copilot coding agent** | Usado durante tareas de codificación automatizadas |

### Sitio oficial

Más información sobre el estándar Agent Skills en: [agentskills.io](https://agentskills.io)

---

## 8. Mejores Prácticas

### Al crear skills

1. **Ser específico en la descripción**
   - Incluir cuándo usar el skill
   - Mencionar tecnologías específicas
   - Definir casos de uso claros

2. **Incluir ejemplos concretos**
   - Código de ejemplo real
   - Prompts de invocación
   - Expected output

3. **Mantener skills enfocados**
   - Un skill = una responsabilidad
   - Evitar skills demasiado genéricos
   - Dividir skills complejos en múltiples skills pequeños

4. **Documentar recursos adicionales**
   - Scripts incluidos
   - Templates disponibles
   - Referencias externas

### Al usar skills

1. **Revisar el skill antes de usar**
   - Leer SKILL.md completo
   - Entender las limitaciones
   - Verificar compatibilidad con el proyecto

2. **Proporcionar contexto adecuado**
   - Incluir archivos SDD relevantes
   - Especificar requisitos técnicos
   - Mencionar constraints del proyecto

3. **Validar el output**
   - Verificar contra spec.md
   - Revisar cumplimiento de estándares
   - Probar el código generado

---

## 9. Checklist de Validación

### Para crear un skill

- [ ] Carpeta `.github/skills/[skill-name]/` creada
- [ ] Archivo `skill.yaml` con YAML válido
- [ ] Campo `name` en kebab-case (max 64 caracteres)
- [ ] Campo `description` claro y específico (max 1024 caracteres)
- [ ] Archivo `instructions.md` con todas las secciones obligatorias
- [ ] Secciones `When to use` y `Project Context` incluidas
- [ ] Ejemplos de código funcionales
- [ ] Secciones `Output Format` y `Files to Write` claras
- [ ] Skill sigue patrones de skills existentes

### Para usar un skill

- [ ] Skill existe en `.github/skills/`
- [ ] Revisar `skill.yaml` para keywords y contexto requerido
- [ ] Leer `instructions.md` para entender estándares
- [ ] Incluir referencia a artefactos SDD en la invocación
- [ ] Especificar endpoints/requisitos claramente
- [ ] Validar output contra spec.md
- [ ] Documentar uso en tasks.md si aplica

---


### Documentación oficial de VS Code

- [Customize AI responses overview](https://code.visualstudio.com/docs/copilot/customization/overview)
- [Create custom instructions](https://code.visualstudio.com/docs/copilot/customization/custom-instructions)
- [Create reusable prompt files](https://code.visualstudio.com/docs/copilot/customization/prompt-files)
- [Create custom agents](https://code.visualstudio.com/docs/copilot/customization/custom-agents)
- [Agent Skills specification](https://agentskills.io)

### Repositorios de referencia

- [Reference skills repository](https://github.com/anthropics/skills)
- [awesome-copilot](https://github.com/github/awesome-copilot)

### Microsoft Learn

- [Módulo: Implementación del desarrollo controlado por especificaciones mediante el Kit de especificaciones de GitHub](https://learn.microsoft.com/es-es/training/modules/spec-driven-development-github-spec-kit-enterprise-developers/)

---

