# Workflow Spec-Kit SDD: Guía Completa de Fases

## Visión General del Flujo

```
┌─────────────────┐
│ CONSTITUTION    │ ← Fundamentos del proyecto (.specify/memory/constitution.md)
└────────┬────────┘
         ↓
┌─────────────────┐
│ SPECIFY         │ ← Qué construir (specs/[feature]/spec.md)
│    clarificar   │
└────────┬────────┘
         ↓
┌─────────────────┐
│ PLAN            │ ← Cómo construirlo (specs/[feature]/plan.md)
│    analyze      │
└────────┬────────┘
         ↓
┌─────────────────┐
│ TASKS           │ ← Paso a paso (specs/[feature]/tasks.md)
└────────┬────────┘
         ↓
┌─────────────────┐
│ IMPLEMENT       │ ← Código en src/
│    checklist    │
└─────────────────┘
```

---

## Fase 1: CONSTITUTION (/speckit.constitution)

### Qué genera
- `.specify/memory/constitution.md`: Principios técnicos no negociables del proyecto

### Comportamiento esperado
- Define stack tecnológico (lenguajes, frameworks)
- Establece estándares de codificación
- Documenta requisitos de seguridad
- Especifica requisitos de testing (cobertura mínima)

### Salidas posibles desde esta fase

| Comando | Qué hace | Cuándo usarlo |
|---------|----------|---------------|
| `/speckit.specify` | Crear primera especificación | Constitución lista |
| `/speckit.plan` | Planificar arquitectura | Si ya tienes specs |
| /speckit.constitution | Actualizar principios | Cambios en estándares |

### Regla práctica
> La constitución es la fuente de verdad. Todas las fases siguientes deben cumplirla.

---

## Fase 2: SPECIFY (/speckit.specify)

### Qué genera
- `specs/[feature]/spec.md`: Especificación funcional del feature

### Comportamiento esperado
- Incluye **Open Questions**: preguntas sobre ambigüedades detectadas
- Contiene **Aprobación Requerida**: checkpoint antes de Planning
- Define criterios de aceptación medibles
- Documenta user stories y reglas de negocio

### Qué hacer después

#### Con Open Questions
1. Revisar cada pregunta
2. Proporcionar respuestas (editar spec.md o responder al agente)
3. Iterar con `/speckit.specify` si hay cambios sustanciales

#### Con Aprobación Requerida
1. Revisar spec.md completo
2. Obtener aprobación de Product Owner y Tech Lead
3. Resolver todas las Open Questions
4. Solo entonces: proceder a Planning

### Salidas posibles desde esta fase

| Comando | Qué hace | Cuándo usarlo |
|---------|----------|---------------|
| `/speckit.clarify` | Identificar más ambigüedades | Open Questions sin resolver |
| `/speckit.plan` | Crear plan técnico | Spec aprobada |
| `/speckit.specify` | Iterar/refinar spec | Cambios en requisitos |

### Comandos complementarios

#### /speckit.clarify
Analiza el spec.md y formula preguntas adicionales para identificar brechas no detectadas.

```
/speckit.clarify
```
*Uso: después de generar spec.md, antes de aprobación*

---

## Fase 3: PLAN (/speckit.plan)

### Qué genera
- `specs/[feature]/plan.md`: Plan técnico con decisiones arquitectónicas

### Comportamiento esperado
- Define estructura de proyectos y capas
- Documenta dependencias NuGet (nombre, versión, justificación)
- Establece secuencia de implementación
- Verifica cumplimiento con constitución

### Salidas posibles desde esta fase

| Comando | Qué hace | Cuándo usarlo |
|---------|----------|---------------|
| `/speckit.tasks` | Desglosar en tareas | Plan aprobado |
| `/speckit.analyze` | Verificar coherencia | Antes de tasks |
| `/speckit.plan` | Revisar decisiones | Cambios técnicos |

### Comandos complementarios

#### /speckit.analyze
Verifica coherencia entre spec.md, plan.md, tasks.md y constitución.

```
/speckit.analyze
```
*Uso: antes de ejecutar /speckit.tasks, para validar integridad*

---

## Fase 4: TASKS (/speckit.tasks)

### Qué genera
- `specs/[feature]/tasks.md`: Lista de tareas discretas y accionables

### Comportamiento esperado
- Organiza tareas por fases de implementación
- Cada tarea incluye descripción clara y criterios dedone
- Identifica dependencias entre tareas
- Asigna estimaciones (opcional)

### Salidas posibles desde esta fase

| Comando | Qué hace | Cuándo usarlo |
|---------|----------|---------------|
| `/speckit.implement` | Ejecutar tareas | Tasks listo |
| `/speckit.tasks` | Refinar/descomponer | Granularidad incorrecta |
| `/speckit.plan` | Cambiar arquitectura | Decisiones técnicas erróneas |

### Comandos complementarios

#### /speckit.checklist
Genera checklist de validación para una tarea o feature.

```
/speckit.checklist
```
*Uso: antes de marcar una tarea como completada*

---

## Fase 5: IMPLEMENT (/speckit.implement)

### Qué genera
- Código en `src/`: Archivos .cs, .cshtml, configuraciones, etc.

### Comportamiento esperado
- Genera código basado en spec.md, plan.md y tasks.md
- Crea o actualiza archivos según decisiones arquitectónicas
- Añade referencias NuGet a .csproj

### Salidas posibles desde esta fase

| Comando | Qué hace | Cuándo usarlo |
|---------|----------|---------------|
| `/speckit.checklist` | Validar implementación | Después de cada task |
| `/speckit.analyze` | Verificar coherencia | Antes de commit |
| `/speckit.implement` | Continuar tareas | Siguiente tarea |

---

## Diagrama de Transiciones

```
                    ┌──────────────────────────────────────────┐
                    │           .specify/memory/               │
                    │           constitution.md                │
                    └──────────────────┬───────────────────────┘
                                       │
                    ┌──────────────────▼───────────────────────┐
                    │         /speckit.constitution            │
                    │  (crear/actualizar principios)           │
                    └──────────────────┬───────────────────────┘
                                       │
                    ┌──────────────────▼───────────────────────┐
                    │              specs/[feature]/            │
                    │              spec.md                     │
                    └──────────────────┬───────────────────────┘
                                       │
           ┌───────────────────────────┼───────────────────────────┐
           │                           │                           │
   ┌───────▼───────────┐       ┌───────▼───────┐           ┌───────▼──────────┐
   │ /speckit.clarify  │       │ /speckit.plan │           │ /speckit.specify │
   │ (identificar gaps)│       │ (decisiones)  │           │ (re-iterar)      │
   └───────┬───────────┘       └───────┬───────┘           └───────┬──────────┘
           │                           │                           │
           │                           │                           │
           │                   ┌───────▼─────────┐                 │
           │                   │   APROBACIÓN    │                 │
           │                   │ (PO + Tech Lead)│                 │
           │                   └───────┬─────────┘                 │
           │                           │                           │
           │                           │                           │
   ┌───────▼───────────────────────┐   │                           │
   │         /speckit.analyze      │   │                           │
   │  (validar coherencia SDD)     │   │                           │
   └───────────────────┬───────────┘   │                           │
                       │               │                           │
               ┌───────▼────────┐      │                           │
               │ /speckit.tasks │      │                           │
               │ (desglose)     │      │                           │
               └───────┬────────┘      │                           │
                       │               │                           │
                       │               │                           │
               ┌───────▼────────────┐  │                           │
               │ /speckit.implement │  │                           │
               │ (generar código)   │  │                           │
               └───────┬────────────┘  │                           │
                       │               │                           │
               ┌───────▼────────────┐  │                           │
               │ /speckit.checklist │  │                           │
               │ (validar)          │  │                           │
               └────────────────────┘  │                           │
```

---

## Resumen por Fase

| Fase | Artefacto | Comportamiento | Salidas |
|------|-----------|----------------|---------|
| **Constitution** | constitution.md | Principios técnicos | Specify, Plan |
| **Specify** | spec.md | Requisitos funcionales | Clarify, Plan, Re-iterate |
| **Plan** | plan.md | Decisiones técnicas | Analyze, Tasks, Re-plan |
| **Tasks** | tasks.md | Tareas accionables | Implement, Re-tasks |
| **Implement** | src/ | Código | Checklist, Analyze, Continue |

---

## Comandos Complementarios

| Comando | Propósito | Fase típica |
|---------|-----------|-------------|
| `/speckit.clarify` | Identificar ambigüedades | Después de Specify |
| `/speckit.analyze` | Validar coherencia SDD | Antes de Tasks/Implement |
| `/speckit.checklist` | Checklist de validación | Después de Implement |
| `/speckit.clarify` | Iterar especificaciones | Cualquier momento |

---

## Reglas de Oro

1. **No hagas skip de fases**: Cada fase SDD tiene un propósito específico
2. **Resuelve Open Questions antes de Plan**: Evita decisiones técnicas prematuras
3. **Obtén aprobación antes de Plan**: El spec.md es el contrato con stakeholders
4. **Analiza coherencia antes de Implement**: Evita drift entre spec/plan/tasks
5. **Checklist antes de marcar done**: Validación explícita de cada tarea
